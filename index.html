<body>
<div style="position:relative; height:50vh; background:linear-gradient(to bottom,#2980b9,#f39c12); overflow:hidden;">
  <div id="sun" style="position:absolute; top:-80px; left:50%; transform:translateX(-50%); width:80px; height:80px; background:yellow; border-radius:50%; box-shadow:0 0 50px 20px rgba(255,223,0,0.5);"></div>
  
  <div style="position:absolute; top:10px; left:50%; transform:translateX(-50%); z-index:10; display:flex; flex-direction:column; align-items:center;">
    <input id="cityInput" placeholder="Type city or AI term..." oninput="showSuggestions()" style="padding:10px; border-radius:5px; border:none; width:220px;">
    <div id="suggestions" style="position:absolute; background:#fff; color:#000; width:220px; max-height:150px; overflow-y:auto; border-radius:5px; top:40px; left:0; z-index:20;"></div>
    <button onclick="getWeather()" style="margin-top:5px; padding:10px 15px; border-radius:5px; border:none; background:#fff; color:#2980b9; font-weight:bold; cursor:pointer;">Enter</button>
  </div>
</div>

<div style="position:relative; height:50vh; background:#34495e; overflow:hidden;">
  <div style="position:absolute; width:200%; height:20px; background:rgba(255,255,255,0.2); border-radius:50%; bottom:40%; left:-50%; animation:waveMove 6s linear infinite;"></div>
  <img src="https://static.vecteezy.com/system/resources/thumbnails/024/521/101/small/cruise-ship-transparent-background-png.png" id="ship" style="position:absolute; bottom:10%; width:80px; height:auto;">
</div>

<div id="weather" style="position:absolute; bottom:10px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.4); padding:10px 20px; border-radius:10px; color:#fff; display:none; text-align:center;">
  <h2 id="cityName"></h2>
  <img id="weatherIcon" src="" alt="Weather Icon" style="width:50px;height:50px;">
  <p id="description"></p>
  <p>Temperature: <span id="temp"></span>Â°C</p>
  <p>Humidity: <span id="humidity"></span>%</p>
</div>

<script>
// --- Sun animation ---
const sun = document.getElementById('sun');
const sunDuration = 30000; // 30 seconds
function animateSun() {
  let start = null;
  const topStart = -80;
  const topEnd = window.innerHeight;
  
  function step(timestamp) {
    if(!start) start=timestamp;
    let progress = timestamp - start;
    let percent = progress/sunDuration;
    if(percent>1) percent=1;
    sun.style.top = topStart + (topEnd-topStart)*percent + 'px';
    if(percent<1) requestAnimationFrame(step);
    else {
      sun.style.top = topStart + 'px'; // reset top
      requestAnimationFrame(animateSun);
    }
  }
  requestAnimationFrame(step);
}
animateSun();

// --- Ship animation ---
const ship = document.getElementById('ship');
const shipDuration = 30000;
function animateShip(){
  let start=null;
  const leftStart=-100;
  const leftEnd=window.innerWidth+100;
  function step(timestamp){
    if(!start) start=timestamp;
    let progress = timestamp - start;
    let percent = progress/shipDuration;
    if(percent>1) percent=1;
    ship.style.left = leftStart + (leftEnd-leftStart)*percent + 'px';
    if(percent<1) requestAnimationFrame(step);
    else {
      ship.style.left = leftStart+'px';
      requestAnimationFrame(animateShip);
    }
  }
  requestAnimationFrame(step);
}
animateShip();

// --- Suggestions ---
const suggestionsList = ["London","Paris","New York","Tokyo","Sydney","Mumbai","Dubai","Singapore","Los Angeles","Melbourne","Gemini","Grok","ChatGPT","AI Art","Weather App","Roblox","Coding","Mars","SpaceX","Crypto"];
function showSuggestions(){
  const input=document.getElementById('cityInput').value.toLowerCase();
  const suggestions=document.getElementById('suggestions');
  suggestions.innerHTML='';
  const filtered = suggestionsList.filter(item=>item.toLowerCase().includes(input));
  filtered.forEach(addSuggestion);
  suggestions.style.display=filtered.length>0?'block':'none';
}
function addSuggestion(item){
  const suggestions=document.getElementById('suggestions');
  const div=document.createElement('div');
  div.innerText=item;
  div.onclick=()=>{
    document.getElementById('cityInput').value=item;
    suggestions.style.display='none';
    getWeather(item);
  };
  suggestions.appendChild(div);
}

// --- Waves animation ---
const wave = document.querySelector('div[style*="rgba(255,255,255,0.2)"]');
function animateWave(){
  let start=null;
  function step(timestamp){
    if(!start) start=timestamp;
    let percent=((timestamp-start)/6000)%1;
    wave.style.transform='translateX(' + (percent*50) + '%)';
    requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}
animateWave();

// --- Real weather ---
async function getWeather(city){
  city = city || document.getElementById('cityInput').value;
  if(!city) return;
  try{
    const weatherResp = await fetch(`https://wttr.in/${city}?format=j1`);
    const weatherData = await weatherResp.json();
    const current = weatherData.current_condition[0];

    document.getElementById('cityName').innerText = city;
    document.getElementById('weatherIcon').src = '';
    document.getElementById('description').innerText = current.weatherDesc[0].value;
    document.getElementById('temp').innerText = current.temp_C;
    document.getElementById('humidity').innerText = current.humidity;

    document.getElementById('weather').style.display='block';
  }catch(err){
    document.getElementById('cityName').innerText = city;
    document.getElementById('description').innerText='Weather not found';
    document.getElementById('temp').innerText='-';
    document.getElementById('humidity').innerText='-';
    document.getElementById('weather').style.display='block';
  }
}

// Show suggestions on load
showSuggestions();
</script>
</body>
